<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.autosys.system.user.mapper.IUserMapper">
    <select id="checkUserNameUnique" parameterType="String" resultType="Integer">
		select count(1) from sys_user where username = #{username} and del_flag = 0 limit 1
	</select>
	<select id="checkPhoneUnique" parameterType="String" resultType="Integer">
		select count(1) from sys_user where phone = #{phone} and del_flag = 0 limit 1
	</select>
	<select id="checkEmailUnique" parameterType="String" resultType="Integer">
		select count(1) from sys_user where email = #{email} and del_flag = 0 limit 1
	</select>
	<insert id="insertUser" parameterType="com.autosys.system.user.domain.entity.User">
		insert into sys_user(
		id,
		<if test="username != null and username != ''">username,</if>
		<if test="userType != null and userType != ''">user_type,</if>
		<if test="email != null and email != ''">email,</if>
		<if test="phone != null and phone != ''">phone,</if>
		<if test="sex != null and sex != ''">sex,</if>
		<if test="password != null and password != ''">password,</if>
		<if test="salt != null and salt != ''">salt,</if>
		<if test="status != null and status != ''">status,</if>
		<if test="createBy != null and createBy != ''">create_by,</if>
		<if test="remark != null and remark != ''">remark,</if>
		create_time
		)values(
		<if test="id != null and id != ''">#{id},</if>
		<if test="username != null and username != ''">#{username},</if>
		<if test="userType != null and userType != ''">#{userType},</if>
		<if test="email != null and email != ''">#{email},</if>
		<if test="phone != null and phone != ''">#{phone},</if>
		<if test="sex != null and sex != ''">#{sex},</if>
		<if test="password != null and password != ''">#{password},</if>
		<if test="salt != null and salt != ''">#{salt},</if>
		<if test="status != null and status != ''">#{status},</if>
		<if test="createBy != null and createBy != ''">#{createBy},</if>
		<if test="remark != null and remark != ''">#{remark},</if>
		sysdate()
		)
	</insert>
</mapper>
